<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GeoPlanner - Inicia Sesión</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f8f9fa;
      min-height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      padding-bottom: 80px; /* Espacio para el footer fijo */
    }

    /* --- ESTILOS CORREGIDOS --- */
    main {
      flex: 1; /* Permite que el contenido principal ocupe el espacio disponible */
      display: flex;
      align-items: center; /* Centra verticalmente el contenedor del login */
      justify-content: center; /* Centra horizontalmente */
    }
    /* --- FIN DE LA CORRECCIÓN --- */

    .login-container {
      background: linear-gradient(145deg, #007BFF, #003366);
      border-radius: 15px;
      padding: 2.5rem;
      max-width: 420px;
      width: 100%;
      color: white;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      animation: fadeSlideUp 1s ease forwards;
    }

    /* Animación de caída */
      .logo-drop {
        animation: dropIn 1s ease-out;
      }

      .logo-spin {
        width: 90px;
        margin-bottom: 1rem;
        animation: spinY 6s linear infinite;
        transform-origin: center;
        transform-style: preserve-3d;
      }

      @keyframes dropIn {
        0% {
          transform: translateY(-100px) scale(1.2);
          opacity: 0;
        }
        70% {
          transform: translateY(10px) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateY(0);
        }
      }

      @keyframes spinY {
        0% { transform: rotateY(0deg); }
        100% { transform: rotateY(360deg); }
      }

      @keyframes fadeSlideUp {
        0% { opacity: 0; transform: translateY(30px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    .btn-custom {
      background-color: #00bfff;
      color: white;
      border: none;
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 10px #00bfff88;
      transition: transform 0.2s ease;
    }

    .btn-custom:hover {
      transform: scale(1.03);
      box-shadow: 0 0 20px #00bfffcc;
    }

    .btn-custom::after {
      content: "";
      position: absolute;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      transform: scale(0);
      animation: ripple 0.6s linear;
      pointer-events: none;
    }

    .btn-custom:active::after {
      top: var(--y);
      left: var(--x);
      width: 200px;
      height: 200px;
      transform: scale(1);
    }

    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    .tagline {
      font-size: 1rem;
      color: #dce9ff;
      margin-bottom: 2rem;
    }

    a {
      color: #a9dcff;
    }

    a:hover {
      color: #ffffff;
      text-decoration: underline;
    }
     .footer-bar {
      background-color: #ffffff;
      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.08);
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 1030;
    }

    .footer-text {
      font-size: 1rem;
      color: #555;
      font-weight: 500;
    }

    .footer-link {
      font-size: 1rem;
      color: #555;
      text-decoration: none;
    }

    .footer-link:hover {
      color: #000;
      text-decoration: underline;
    }

    @media (max-width: 576px) {
      .footer-bar .container-fluid {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>
</head>
<body class="d-flex flex-column">

  <main>
    <div class="login-container text-center">
      <div class="logo-drop">
        <img src="img/Logo.png" alt="Logo GeoPlanner" class="logo-spin" />
      </div>
      <h2>Bienvenido a GeoPlanner</h2>
      <p class="tagline">Planifica, organiza y colabora desde el mapa.</p>

      <form>
        <div class="form-floating mb-3">
          <input type="text" class="form-control" id="usuario" placeholder="@usuario" />
          <label for="usuario">@Usuario o Correo</label>
        </div>
        <div class="form-floating mb-3">
          <input type="password" class="form-control" id="password" placeholder="Contraseña" />
          <label for="password">Contraseña</label>
        </div>
        <button type="submit" class="btn btn-custom w-100">Iniciar Sesión</button>
      </form>

      <hr class="my-4" />
      <p>¿Nuevo en GeoPlanner? <a href="registro_1.html">Regístrate aquí</a></p>
      <p><a href="recuperar.html">¿Olvidó su contraseña o no puede ingresar?</a></p>
    </div>
  </main>

  <footer class="footer-bar">
      <div class="container-fluid d-flex flex-wrap justify-content-between align-items-center px-4 py-3">
        <span class="footer-text">© 2025 GeoPlanner. Todos los derechos reservados — Juan Sarcos.</span>
        <div class="footer-links d-flex flex-wrap gap-3">
          <a href="#" class="footer-link">Español (ES)</a>
          <a href="#" class="footer-link">English (EN)</a>
        </div>
      </div>
    </footer>

  <script>
  // Script para el efecto ripple del botón (ya lo tenías)
  const button = document.querySelector('.btn-custom');
  button.addEventListener('mousedown', function (e) { // Usamos mousedown para mejor efecto
    const rect = this.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    this.style.setProperty('--x', `${x}px`);
    this.style.setProperty('--y', `${y}px`);
  });

  // Lógica para el inicio de sesión
  document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();

    const userInput = document.getElementById('usuario').value;
    const passwordInput = document.getElementById('password').value;

    // Obtenemos la lista de usuarios de nuestra "base de datos"
    const usuarios = JSON.parse(localStorage.getItem('geoPlannerUsers')) || [];

    // Buscamos un usuario que coincida con el usuario/correo y la contraseña
    const usuarioEncontrado = usuarios.find(user =>
      (user.nombreUsuario === userInput || user.email === userInput) && user.password === passwordInput
    );

    if (usuarioEncontrado) {
      alert(`¡Bienvenido de nuevo, ${usuarioEncontrado.nombre}!`);
      // Guardamos al usuario actual en sessionStorage para que la sesión dure solo mientras la pestaña esté abierta
      sessionStorage.setItem('currentUser', JSON.stringify(usuarioEncontrado));
      window.location.href = 'dashboard.html';
    } else {
      alert('Usuario o contraseña incorrectos. Por favor, inténtalo de nuevo.');
    }
  });
</script>
</body>
</html>
